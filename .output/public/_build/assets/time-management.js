import{u as K,a as Q,r as d,j as e}from"./client2.js";const ee=function(){const{user:x}=K({from:"__root__"}),k=Q(),[f,W]=d.useState("daily"),[j,p]=d.useState([]);d.useEffect(()=>{if(!x){p([]);return}const t=localStorage.getItem("timeManagementItems");if(t)try{const s=JSON.parse(t);if(Array.isArray(s))p(s);else if(s.daily||s.weekly||s.monthly){const r=[...s.daily||[],...s.weekly||[],...s.monthly||[]];p(r)}}catch(s){console.error("Error loading saved items:",s)}},[x]),d.useEffect(()=>{if(x&&j.length>0){localStorage.setItem("timeManagementItems",JSON.stringify(j)),L(!0);const t=setTimeout(()=>{L(!1)},2e3);return()=>clearTimeout(t)}},[j,x]);const[c,C]=d.useState(null),[m,b]=d.useState({title:"",description:"",startTime:"",endTime:"12:00",color:"#3B82F6"}),[n,g]=d.useState(new Date),[h,T]=d.useState(null),[O,D]=d.useState(!1),[i,y]=d.useState({title:"",description:"",startTime:"",endTime:"",color:"#3B82F6"}),[P,L]=d.useState(!1),N=Array.from({length:24},(t,s)=>`${s.toString().padStart(2,"0")}:00`),F=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#6B7280","#14B8A6"],U=()=>{if(!m.title.trim()||!c)return;if(!x){alert("Please login to save tasks to your account!"),k({to:"/login",search:{redirect:"/time-management"}});return}const t={id:Date.now().toString(),title:m.title,description:m.description,startTime:c.time,endTime:m.endTime,date:c.date,color:m.color};p(s=>[...s,t]),b({title:"",description:"",startTime:"",endTime:"12:00",color:"#3B82F6"}),C(null)},V=t=>{if(!x){alert("Please login to delete tasks!"),k({to:"/login",search:{redirect:"/time-management"}});return}p(s=>s.filter(r=>r.id!==t)),D(!1),T(null)},M=t=>{T(t),y({title:t.title,description:t.description,startTime:t.startTime,endTime:t.endTime,color:t.color}),D(!0)},_=()=>{if(!(!h||!i.title.trim())){if(!x){alert("Please login to modify tasks!"),k({to:"/login",search:{redirect:"/time-management"}});return}p(t=>t.map(s=>s.id===h.id?{...s,title:i.title,description:i.description,startTime:i.startTime,endTime:i.endTime,color:i.color}:s)),D(!1),T(null)}},$=()=>{D(!1),T(null)},B=()=>{const t=new Date(n),s=t.getDay(),r=t.getDate()-s+(s===0?-6:1);return t.setDate(r),Array.from({length:7},(l,a)=>{const o=new Date(t);return o.setDate(t.getDate()+a),o})},z=()=>{const t=n.getFullYear(),s=n.getMonth(),r=new Date(t,s,1),l=new Date(r);l.setDate(r.getDate()-r.getDay());const a=[];for(let o=0;o<42;o++){const v=new Date(l);v.setDate(l.getDate()+o),a.push(v)}return a},u=t=>{const s=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0");return`${s}-${r}-${l}`},S=t=>j.filter(s=>s.date===t),E=(t,s)=>{const r=u(t),l=u(s);return j.filter(a=>a.date>=r&&a.date<=l)},R=t=>{const s=B(),r=s[0],l=s[6];return E(r,l)},Y=t=>{const s=t.getFullYear(),r=t.getMonth(),l=new Date(s,r,1),a=new Date(s,r+1,0);return E(l,a)},I=(t,s)=>{C({date:t,time:s}),b(r=>({...r,startTime:s}))},H=()=>{const t=u(n),s=S(t);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold",children:n.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(new Date(n.setDate(n.getDate()-1))),className:"p-2 hover:bg-gray-100 rounded-lg",children:"‹"}),e.jsx("button",{onClick:()=>g(new Date),className:"px-4 py-2 text-sm bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200",children:"Today"}),e.jsx("button",{onClick:()=>g(new Date(n.setDate(n.getDate()+1))),className:"p-2 hover:bg-gray-100 rounded-lg",children:"›"})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-1 border rounded-lg max-h-[calc(100vh-300px)] overflow-y-auto",children:N.map(r=>{const l=s.filter(a=>a.startTime===r);return e.jsxs("div",{className:`flex items-center gap-4 p-3 border-b hover:bg-gray-50 cursor-pointer transition-colors ${c?.time===r&&c?.date===t?"bg-blue-50 border-blue-200":""}`,onClick:()=>I(t,r),children:[e.jsx("div",{className:"w-20 text-sm font-mono text-gray-500 font-medium",children:r}),e.jsx("div",{className:"flex-1 min-h-[50px] flex items-center gap-2",children:l.map(a=>e.jsxs("div",{className:"flex-1 p-3 rounded-lg text-white cursor-pointer hover:opacity-90 transition-opacity",style:{backgroundColor:a.color},onClick:o=>{o.stopPropagation(),M(a)},children:[e.jsx("div",{className:"font-medium",children:a.title}),e.jsxs("div",{className:"text-sm opacity-90",children:[a.startTime," - ",a.endTime]}),a.description&&e.jsx("div",{className:"text-xs opacity-75 mt-1 truncate",children:a.description}),e.jsx("div",{className:"text-xs opacity-75 mt-1",children:"Click to view details"})]},a.id))})]},r)})})]})},J=()=>{const t=B();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-xl font-semibold",children:["Week of ",t[0].toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(new Date(n.setDate(n.getDate()-7))),className:"p-2 hover:bg-gray-100 rounded-lg",children:"‹"}),e.jsx("button",{onClick:()=>g(new Date),className:"px-4 py-2 text-sm bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200",children:"This Week"}),e.jsx("button",{onClick:()=>g(new Date(n.setDate(n.getDate()+7))),className:"p-2 hover:bg-gray-100 rounded-lg",children:"›"})]})]}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-8 bg-gray-50",children:[e.jsx("div",{className:"p-3 font-medium text-sm text-gray-600 border-r",children:"Time"}),t.map(s=>e.jsxs("div",{className:"p-3 font-medium text-sm text-gray-600 text-center border-r last:border-r-0",children:[e.jsx("div",{children:s.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("div",{className:"text-xs text-gray-500",children:s.getDate()})]},s.toISOString()))]}),e.jsx("div",{className:"max-h-[calc(100vh-300px)] overflow-y-auto",children:N.map(s=>e.jsxs("div",{className:"grid grid-cols-8 border-b last:border-b-0",children:[e.jsx("div",{className:"p-3 text-sm font-mono text-gray-500 border-r bg-gray-50 font-medium",children:s}),t.map(r=>{const l=u(r),a=S(l).filter(o=>o.startTime===s);return e.jsx("div",{className:`p-2 min-h-[60px] border-r last:border-r-0 cursor-pointer hover:bg-gray-50 transition-colors ${c?.date===l&&c?.time===s?"bg-blue-50":""}`,onClick:()=>I(l,s),children:a.map(o=>e.jsxs("div",{className:"p-2 rounded text-xs text-white mb-1 cursor-pointer hover:opacity-90 transition-opacity",style:{backgroundColor:o.color},onClick:v=>{v.stopPropagation(),M(o)},children:[e.jsx("div",{className:"font-medium truncate",children:o.title}),e.jsxs("div",{className:"text-xs opacity-90",children:[o.startTime,"-",o.endTime]})]},o.id))},`${l}-${s}`)})]},s))})]})]})},q=()=>{const t=z(),s=n.getMonth();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold",children:n.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(new Date(n.setMonth(n.getMonth()-1))),className:"p-2 hover:bg-gray-100 rounded-lg",children:"‹"}),e.jsx("button",{onClick:()=>g(new Date),className:"px-4 py-2 text-sm bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200",children:"This Month"}),e.jsx("button",{onClick:()=>g(new Date(n.setMonth(n.getMonth()+1))),className:"p-2 hover:bg-gray-100 rounded-lg",children:"›"})]})]}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"grid grid-cols-7 bg-gray-50",children:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(r=>e.jsx("div",{className:"p-4 font-medium text-sm text-gray-600 text-center border-r last:border-r-0",children:r},r))}),e.jsx("div",{className:"grid grid-cols-7",children:t.map((r,l)=>{const a=u(r),o=S(a),v=r.getMonth()===s,A=a===u(new Date);return e.jsxs("div",{className:`min-h-[140px] p-3 border-r border-b last:border-r-0 cursor-pointer hover:bg-gray-50 transition-colors ${v?"":"bg-gray-100 text-gray-400"} ${A?"bg-blue-50 border-blue-200":""}`,onClick:()=>I(a,"09:00"),children:[e.jsx("div",{className:`text-sm font-medium mb-2 ${A?"text-blue-600":""}`,children:r.getDate()}),e.jsxs("div",{className:"space-y-1",children:[o.slice(0,3).map(w=>e.jsxs("div",{className:"p-1 rounded text-xs text-white cursor-pointer hover:opacity-90 transition-opacity",style:{backgroundColor:w.color},onClick:G=>{G.stopPropagation(),M(w)},children:[e.jsx("div",{className:"truncate font-medium",children:w.title}),e.jsx("div",{className:"truncate text-xs opacity-90",children:w.startTime})]},w.id)),o.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 font-medium",children:["+",o.length-3," more"]})]})]},l)})})]})]})};return e.jsx("div",{className:"min-h-screen bg-gray-50 pt-20",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Time Management"}),e.jsx("p",{className:"text-gray-600",children:"Schedule your tasks and manage your time effectively"}),!x&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),e.jsxs("span",{className:"text-yellow-700",children:[e.jsx("button",{onClick:()=>k({to:"/login",search:{redirect:"/time-management"}}),className:"text-blue-600 hover:text-blue-800 underline font-medium",children:"Login"})," to save your tasks permanently"]})]})]})]}),e.jsx("div",{className:"flex border-b border-gray-200 bg-white rounded-lg p-1 shadow-sm",children:["daily","weekly","monthly"].map(t=>e.jsxs("button",{onClick:()=>W(t),className:`flex-1 py-3 px-6 text-sm font-medium transition-colors relative rounded-lg ${f===t?"text-indigo-600 bg-indigo-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[t.charAt(0).toUpperCase()+t.slice(1)," Schedule",(()=>{let s=0;return t==="daily"?s=S(u(n)).length:t==="weekly"?s=R().length:t==="monthly"&&(s=Y(n).length),s>0&&e.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${f===t?"bg-indigo-100 text-indigo-600":"bg-gray-200 text-gray-600"}`,children:s})})()]},t))})]}),P&&e.jsxs("div",{className:"fixed top-24 right-6 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 flex items-center gap-2 animate-pulse",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Tasks saved automatically"]}),e.jsxs("div",{className:"flex gap-8",children:[e.jsxs("div",{className:"flex-1 bg-white rounded-xl shadow-sm p-6",children:[f==="daily"&&H(),f==="weekly"&&J(),f==="monthly"&&q()]}),c&&e.jsxs("div",{className:"w-80 bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6 text-gray-900",children:"Add Schedule Item"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date & Time"}),e.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg border",children:[new Date(c.date).toLocaleDateString()," at ",c.time]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),e.jsx("input",{type:"text",value:m.title,onChange:t=>b(s=>({...s,title:t.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none",placeholder:"Meeting, Task, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:m.description,onChange:t=>b(s=>({...s,description:t.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none resize-none",rows:3,placeholder:"Optional description..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time"}),e.jsx("select",{value:m.endTime,onChange:t=>b(s=>({...s,endTime:t.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none",children:N.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color Category"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:F.map(t=>e.jsx("button",{onClick:()=>b(s=>({...s,color:t})),className:`w-12 h-12 rounded-lg border-2 transition-all hover:scale-105 ${m.color===t?"border-gray-400 ring-2 ring-gray-300":"border-gray-200"}`,style:{backgroundColor:t}},t))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:U,disabled:!m.title.trim(),className:"flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white px-4 py-3 rounded-lg font-medium transition-colors",children:"Add Item"}),e.jsx("button",{onClick:()=>C(null),className:"px-4 py-3 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"})]})]})]})]}),O&&h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-indigo-50 to-purple-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:h.color},children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Task Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date(h.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsx("button",{onClick:$,className:"p-2 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Close",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gray-50 rounded-xl p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Start Time:"}),e.jsx("div",{className:"mt-1 font-mono text-lg",children:h.startTime})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"End Time:"}),e.jsx("div",{className:"mt-1 font-mono text-lg",children:h.endTime})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Title"}),e.jsx("input",{type:"text",value:i.title,onChange:t=>y(s=>({...s,title:t.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none",placeholder:"Task title..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:i.description,onChange:t=>y(s=>({...s,description:t.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none resize-none",rows:4,placeholder:"Task description..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time"}),e.jsx("select",{value:i.startTime,onChange:t=>y(s=>({...s,startTime:t.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none",children:N.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time"}),e.jsx("select",{value:i.endTime,onChange:t=>y(s=>({...s,endTime:t.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none",children:N.map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color Category"}),e.jsx("div",{className:"grid grid-cols-8 gap-2",children:F.map(t=>e.jsx("button",{onClick:()=>y(s=>({...s,color:t})),className:`w-10 h-10 rounded-lg border-2 transition-all hover:scale-105 ${i.color===t?"border-gray-400 ring-2 ring-gray-300":"border-gray-200"}`,style:{backgroundColor:t}},t))})]})]})]})}),e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:_,disabled:!i.title.trim(),className:"flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Update Task"}),e.jsx("button",{onClick:()=>V(h.id),className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Delete"}),e.jsx("button",{onClick:$,className:"px-6 py-3 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"})]})})]})})]})})};export{ee as component};
